<html>
<body>
  <head>

    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <!DOCTYPE html>
</head>  

<html>
  



<div id = "div1"> </div>
  <input type="hidden" id="val" name="val" value="1">
  <div id = "removeButton">
  <div id = "displayMessage"></div>
<center><input   id="button1" onclick = "restoreOriginalOrder()"  type="submit" value="Return to Original Order"/></center>
</div>







<script>  

window.sessionStorage

//this is in callTemplateTwo.html and index.html
var MAXRECORDS = 20

function restoreOriginalOrder()
{
	
	//if(val1 = sessionStorage.getItem("numberOfRecordsChosen"))
	//{
	//	
	//	if (val1 == MAXRECORDS)
	//	{
	//		
	//		return;
	//	}
	//}

	
	//window.location.href = "index.html?displayOrdersTemplateAgain=1";
	return(1);

}

/////////

function checkForPassword()
{
	
	var isThereACorrectPassword = sessionStorage.getItem("sessionUserID");
	
	//is no password
	if (!isThereACorrectPassword)
	{
	
	window.location.href = "login.html";
	}
	else
	{
	document.getElementById("button1").style.visibility = "visible";
	

}
	
}


/////////

//loads ajax on page start
$(function(){

////////
document.getElementById("button1").style.visibility = "hidden";
	
	checkForPassword();

loadData();

////////
//  loadajax();
});


    //////////////////


//checkout button pressed, so is here!
//data is here by sessionstorage
//send it to purge which calls template with data

//restoring past order screen
var gFlagIsSomeRecords = false;
var queryString= ""; 

//calls template2, load ProductID/amount of quantity purchasing
function loadData() {
 

 var string = "";
//////////////////////

let keys = Object.keys(sessionStorage);
var var1 = "hasntBeenHere";

for(let key of keys) {


  
  
  if(key == "sessionUserID")
  {
    continue;
  }
  else if(key == "keywords")
  {
		continue;
  }
  else if(key == "numberOfRecordsChosen")
  {
		continue;
  }
  //else if(key == "alreadyZero")
  //{
//		continue;
//  }

  else if(key == "amtOfKeywords")
  {
		continue;
  }
 

  
  


  
  
  
  //check for not an integer

  var item = sessionStorage.getItem(key);



  
  
  string =  string + "id=" + key + "&amtTryingToPurchase=" + item + "&";
  
  
  gFlagIsSomeRecords = true;


  
    
    
  
}













// no ur//parameters from search at index.html - checkout pressed with nothing selected


//not any  ids and quants
//if(var1 == "hasntBeenHere")
//  {
	  //if checkout has no quant... than here DoesKeywordAlreadyExist checkout to removeKeyword
	  //if search pressed get checkout from session
	  //and remove keyword
	 

	  //var val1 = document.getElementById(dispalyMessage).value;
	  //document.getElementById("displayMessage").innerHTML = "No products were selected!";
	
//	  gFlagIsSomeRecords = true;
	  //var storedArray = [];
	  //sessionStorage.setItem("checkoutPressed", "pressed");
	 
	  //storedArray = JSON.parse(sessionStorage.getItem("keywords"))
	  //storedArray.push(val1);
	  //sessionStorage.removeItem


	
    
    //window.location.href = "index.html?displayOrdersTemplateAgain=1&";
    //return(1);
 // }

  
  
//overWrites"&
if(gFlagIsSomeRecords == true)
{
	queryString = string.substring(0, string.length-1);
	
	
}
//else
//{
	
	//queryString = "";
//}

///


var url = "http://localhost:8080/cartTemplate";
//var queryString = "user_name=jerry&password=666666&user_name=marry&password=11111";


////////




////////
					
  					var val1 = ""
                    $.ajax({
                    type:'POST',
					datatype: 'html',
                    url:url,
                    data:queryString,
                    async:false,
                    success: function (data1) {
						
						//debugger;
						
					  val1 = data1;
					  //if isnt some record
                      if (gFlagIsSomeRecords)
					  {
						  
						  //displays table
							alert("yes1");
							alert(data1);
							//displays on checkout nd then goes to login
							//debugger;
							document.getElementById('div1').innerHTML  = val1;
							//debugger;
							console.log("variables");
							console.log(val1);
						  //val1 = val1 + data1;
						  //$('#div1').html(data1);
					  }
					  else
					  {//data1 is the html for cart template
						val1 = "<br><center><h3>No Products Were Selected Yet!</center><br></h3>";
						document.getElementById('div1').innerHTML  = val1;
						console.log("test");
                     
					  }
                   
                    }
                });
}



/////////////




//https://stackoverflow.com/questions/51300809/load-html-first-before-javascript
//https://stackoverflow.com/questions/588040/window-onload-vs-document-onload
//https://www.skillsugar.com/how-to-use-document-onload-in-javascript


window.onload = function()
{	
	
	
}



/////////////
  

  </script>



</body>
</html>